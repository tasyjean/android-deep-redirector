<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
</head>



<body>
		<strong>User Agent: </strong><p id="useragent"></p></hr>
		<strong>Android Intent: </strong><p id="androidlink"></p></hr>
		<strong>iOS Universal Link: </strong><p id="ioslink"></p></hr>
		<strong>Deep Link: </strong><p id="deeplink"></p></hr>

<script type="text/javascript">

	function NativeAppLauncher(options) {
		var fallback = options.fallback || '';
		var url = options.url || '';
		var iosStoreLink = options.ios_store_link;
		var androidPackageName = options.android_package_name;
		var playStoreLink ='https://market.android.com/details?id=' + androidPackageName;
		var userAgent = window.navigator.userAgent;


		document.getElementById("useragent").innerHTML = userAgent;
		document.getElementById("deeplink").innerHTML = url;
		document.getElementById("ioslink").innerHTML = iosStoreLink;
		document.getElementById("androidlink").innerHTML = urls.android_intent;

  // split the first :// from the url string
  var split = url.split(/:\/\/(.+)/);
  var scheme = split[0];
  var path = split[1] || '';

  var urls = {
  	deepLink: url,
  	iosStoreLink: iosStoreLink,
  	android_intent:
  	'intent://' +
  	path +
  	'#Intent;scheme=' +
  	scheme +
  	';package=' +
  	androidPackageName +
  	';end;',
  	playStoreLink: playStoreLink,
  	fallback: fallback,
  };

  var isAndroid = function () {
  	return /Android/.test(userAgent);
  };
  var isIOS = function () {
  	return /(?:i(?:Phone|P(?:o|a)d))/.test(userAgent);
  };
  var iOSVersion = function () {
  	return isIOS() ? parseInt(userAgent.match(IOS_VERSION_RE)[1], 10) : 0;
  };
  var isChrome = function() {
          // Opera (OPR) also identifies itself as Chrome and has to be corrected for.
          // OPR is used on Android but on iOS it is OPiOS where Opera does NOT identify as Chrome. Go figure!
          // Probably because on iOS it is Opera Mini and has all browser have to be based on Safari/WebKit.
          return /Chrome/.test(userAgent) && !/OPR/.test(userAgent);
      };
      var isFirefox = function () {
      	return /Firefox/.test(userAgent);
      };


      var isMobile = {
      	android: function () {
      		return /Android/i.test(userAgent);
      	},
      	ios: function () {
      		return /iPhone|iPad|iPod/i.test(userAgent);
      	},
      };

  // fallback to the application store on mobile devices
  if (isIOS() && urls.deepLink && urls.iosStoreLink) {
  	iosLaunch();
  } else if (isAndroid() && androidPackageName) {
  	androidLaunch();
  } else {
  	window.location = urls.fallback;
  }

  function launchWekitApproach(url, fallback) {
  	document.location = url;
  	setTimeout(function () {
  		document.location = fallback;
  	}, 250);
  }

  function launchIframeApproach(url, fallback) {
  	var iframe = document.createElement('iframe');
  	iframe.style.border = 'none';
  	iframe.style.width = '1px';
  	iframe.style.height = '1px';
  	iframe.onload = function () {
  		document.location = url;
  	};
  	iframe.src = url;

  	window.onload = function () {
  		document.body.appendChild(iframe);

  		setTimeout(function () {
  			window.location = fallback;
  		}, 25);
  	};
  }

  function iosLaunch() {
    // chrome and safari on ios >= 9 don't allow the iframe approach
    if (
    	userAgent.match(/CriOS/) ||
    	(userAgent.match(/Safari/) && userAgent.match(/Version\/(9|10|11|12)/))
    	) {
    	launchWekitApproach(urls.deepLink, urls.iosStoreLink || urls.fallback);
} else {
	launchIframeApproach(urls.deepLink, urls.iosStoreLink || urls.fallback);
}
}

function androidLaunch() {
	if (isChrome()) {
		document.location = urls.android_intent;
	} else if (isFirefox()) {
		launchWekitApproach(urls.deepLink, urls.playStoreLink || urls.fallback);
	} else {
		launchIframeApproach(url, urls.playStoreLink || urls.fallback);
	}
}
}




NativeAppLauncher({
	url:"https//twitter.com/_/status/584046346862100481",
	androidPackageName:"com.twitter.android",
	iosStoreLink:"https://itunes.apple.com/app/twitter/id333903271?mt=8",
	fallback:"https://google.com"

})


</script>

</body>
</html>